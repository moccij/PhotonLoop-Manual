[{"uri":"/userguide/safety.html","title":"Safety Instructions","tags":[],"description":"","content":" Read carefully the information in this manual before installing and using the product. The producer is not responsible for damages and injury, which can occur due to false handling of the product and ignoring the safety instructions. All warranty will be spoiled in this case.\n   The tools provided by Dynamic Optics are intended to be used for wavefront sensing and compensation tasks. Please comply with the requirements for the proper use of this product. Failure to do so will render the warranty void.\n   The product is not authorized for use in security relevant applications. If it used in security relevant applications, the customer is responsible for the necessary approvals;\n  This product is not a toy and should be kept and operated out of reach of children;\n  If the product is modified or changed, the customer is responsible for ensuring product conformity;\n  Unauthorized opening of the camera housing, mirror/lens chassis or drive electronics voids the warranty. Dynamic Optics SRL assumes no liability for defects if the product was improperly disassembled, reworked, or repaired by the customer or a third party.\n   Installation, operation, and maintenance Deformable mirrors have the properties to deflect light or to focus it at different propagation distances. Therefore, caution must be taken to avoid any direct or indirect illumination of users and/or materials, especially when using lasers.\n   The product must be connected, taken into operation and maintained only by appropriately qualified personnel. The error-free and safe operation of this product can only be ensured if it is properly transported, stored, set up and assembled, and operated and maintained with due care. The installation, inspection, maintenance, extension, and repair may only be done by authorized personnel.\n   The adaptive optics elements must be installed in such way that the specifications are met which are described in the manual;\n  Do not subject the products to direct sunlight, moisture or shock;\n  Lay cables in such way that no one can step on or they do not represent a trip hazard;\n  Before starting up, check if the electrical wiring corresponds to the specifications in this manual. Faulty wiring (overvoltage, undervoltage) can result in a damage in the electronics;\n    Protection against electrostatic discharge (ESD) The rules for handling ESD-sensitive components are to be observed like e. g. by wearing ESD-protective clothes and shoes.\n   Make sure to avoid mechanical or electrical damage of the printed circuit board or its connections;\n  Do not touch the printed circuit board while it is powered;\n  Always hold the board by the edges to avoid the risk of electrostatic discharge damage.\n    Transport   Only use ESD packaging for storage and transport of ESD-sensitive components;\n  Keep packing materials like films away from children. In case of abuse there is a risk of suffocation.\n    Correct disposal   To prevent possible harm to the environment, separate the camera and accessory items from other types of waste. Dispose professionally the camera and accessory items to encourage the recycling of reusable material.\n    "},{"uri":"/userguide.html","title":"User Manual","tags":[],"description":"","content":""},{"uri":"/userguide/installation.html","title":"Installation","tags":[],"description":"","content":"Package Contents The devices supplied by Dynamic Optics for a standard adaptive optical system should include:\n      Item Description     \n PhotonLoop Dongle key.\nThis key will permit you to run PhotonLoop.\n   \n USB Memory Stick\nEach product from Dynamic Optics is delivered with a USB key containing the principal information (manuals and datasheet, etc..) regarding the purchased products.\n    Also, one or more WaveFront Corrector (WFC) as a Deformable Mirror (DM) orn Adaptive Optical Lens (AOL) should be included:\n      Item Description     \n Deformable mirror (Bimorph)\n   \n Adaptive Optical Lens (Bimorph)\n   \n Deformable Mirror (Piezo Stack)\n    A controller interfaces the PC to the WFC:\n      Item Description     \n PZT-Mini (external), USB 2.0 connection.\n   \n PZT-Multi (integrated or external), 10MB Ethernet connection.\n   \n PZT-Stack (external), USB 2.0 connection.\n    A Shack-Hartmann camera acts as the WaveFront Sensor (WFS) of the system:\n      Item Description     \n The WFS is equipped with its own USB 3.0 Cable. Its calibration profile is shipped within the provided USB memory stick.\n      PhotonLoop Installation System requirements PHOTONLOOP require at least the following specifications:\n   Dual Core Processor, 64 bit, 4GB ram;\n  Windows 7 Operating System.\n    Installing PHOTONLOOP and drivers All what you need for installation is provided with the USB stick, drivers and PHOTONLOOP installer. To install PHOTONLOOP and the relative drivers follow these steps, it is not necessary to connect the hardware to the computer at this stage:\n  If not already present in your PC install the iDS uEye driver package (4.80.2 or newer versions, the file is in the USB stick in the folder PHOTONLOOP/drivers);\n  If not already present in your PC install Microsoft Visual Studio 2017 (v14) x64 Runtime Package (VC_redist.x64.exe file is in the USB stick in the folder PHOTONLOOP/drivers);\n  Run PHOTONLOOP Installer, it can be found in the PHOTONLOOP folder of the USB stick and follow the procedure:\n Chose the installation folder that you prefer \n     Select the component to install \n  Read and accept the terms of usage, select the shortcuts location and proceed with the installation. \n  Insert the provided dongle key to use PHOTONLOOP in your computer. You can use PHOTONLOOP in one computer a time.\n      "},{"uri":"/userguide/ao-setup.html","title":"Optical Setup","tags":[],"description":"","content":" A typical setup for adaptive optics includes a deformable optical element that could be a lens or a mirror connected to a controller, the feedback for the controller is provided by the wavefront sensor. In this configuration the AO system is working in closed loop. If the measurements of the wavefront is not used as a control feedback, the system is working in open loop. In the standard setup we offer a deformable lens or mirror controlled by a controller and a Shack-Hartmann wavefront sensor (SHWFS) for the feedback. Relay optical systems are necessary to conjugate all this element with the exit pupil of a generic optical system. The conjugation is very important for accurate measurements of the wavefront and proper AO operation. The relay system is also useful for beam reduction or expansion to adapt it to the clear aperture of the components.\n In the following picture is reported a typical AO setup. Yellow dashed lines represent the conjugated planes.\n \n The exit pupil in the figure is the image of the aperture or stop that limits the marginal ray of the generic optical system. The first relay optics conjugates the exit pupil to the deformable lens and the second relay optics conjugate the lens to lenslet array of the Shack-Hartmann wavefront sensor. The far field camera is not necessary for the AO operation but is usually used to monitor the Point Spread Function (PSF) and allow to have a visual feedback of the AO operation. If the optical system uses a point like source and the AO is working properly, you should see a diffraction limited PSF in the far field camera.\n The AO system with a deformable mirror instead of the deformable lens is very similar to that one reported before, the DM implies a deflection of the beam with a certain angle so, at least two folding static mirrors are necessary in between the first and the second relay optics.\n Closed loop AO operation principle A distorted wavefront comes into the system and is measured with the WFS, the control calculates the correction to feed the deformable element. We obtain a corrected wavefront and in the other side a residual error because new and uncorrelated aberration comes into the system.\n  Non common path aberrations In some cases, also in static configuration, it is not possible to obtain a perfect diffraction limited PSF in the far field camera due to non-common path aberration. This aberration are generated by the optical elements that are not in common between the sensing arm and the far field camera. The effect of non-common path aberrations is that to a flat wavefront does not correspond a diffraction limited PSF on the far field camera. This problem can be solved using better optical elements a careful alignment or setting some aberrations offset in the wavefront sensor controller as described in section10.\n  Physical connections In a standard configuration you need just to connect the controller PZT Mini/Multi and the cameras to computer using the provided USB/Ethernet cable and connect the deformable element to the controller using the multi wire cable. The controller needs an external power supply.\n Deformable elements Deformable elements can be lenses or mirrors. Lenses are composed by thin glass windows with a fluid inside and are actuated by piezoelectric material. Mirror are composed by different reflecting surface depending on the application and piezoelectric actuators. The actuator moves when an electric field is applied. Typical voltage range is in between -62.5V/+125V.\n For more detailed in information see the literature list on:\n https://dynamic-optics.eu/tech.php\n  Shack-Hartmann Wave Front Sensor The device is composed by a camera, typically a CMOS, and a lenslet array. The lenslet array is a series of identical micro lenses. The lenslet array sample in space domain the wavefront and produce a series of spots. The position of the spots center of mass is related to the local wavefront gradient. This information is used to reconstruct the wavefront via interpolation with the derivative of Zernike polynomials.\n The wavefront sensor is characterized by the focal length and the pitch of the lenslets array. These two parameters influence the sensitivity and dynamical range of the sensor.\n For more detailed in information see the literature list on:\n https://dynamic-optics.eu/tech.php\n    How to build your own AO system We list the Thorlabs components that can be used to build your own AO system compatible with Dynamic Optic products. We refer to a standard setup as described before in this section with a deformable lens.\n The following image depicts a standard AO setup with a deformable lens.\n \n In the following table you will find all the components:\n        Component Code Manufacturer     Laser Diode\n LDM635/5LJ\n Roithner Lasertechnik\n   SM1-Threaded Adapter\n AD12F\n Thorlabs\n   Cage Plate Adapter\n LCP02/M\n Thorlabs\n   Lens (collimation)\n AC508-200-A-ML\n Thorlabs\n   Cage Plate\n LCP01/M\n Thorlabs\n   Adaptive lens\n AOL1825\n Dynamic Optics\n   Lens (focusing)\n AC508-200-A-ML\n Thorlabs\n   Cage Plate 60 mm\n LCP01/M\n Thorlabs\n   Cage Plate Adapter\n LCP02/M\n Thorlabs\n   Lens (collimation)\n 1\u0026#34; Achromatic Doublet, SM1-Threaded Mount, ARC: 400-700nm. Depending on the MAL:\n        MAL Part # f     AOL1825\n AC254-040-A-ML\n 40 mm\n   AOL1816\n AC254 060-A-ML\n 60 mm\n   AOL1810\n AC254-100-A-ML\n 100 mm\n   AOL1805\n AC254-200-A-ML\n 200 mm\n    Thorlabs\n   Cage Plate 30 mm\n CP02/M - SM1\n Thorlabs\n   Wavefront sensor\n WFS1\n Dynamic Optics\n   Cage Plate 30 mm\n CP02/M - SM1\n Thorlabs\n   Beam splitter\n CCM1-BS013/M\n Thorlabs\n   CMOS camera\n DCC1545M\n Thorlabs\n   Cage Plate 30 mm\n CP02/M - SM1\n Thorlabs\n      PhotonLoop Setup As PhotonLoop is installed you are ready to connect the wavefront sensor and the controller PZT mini. These two devices come with their own calibration settings that must be loaded in Photonloop. At this stage, open PhotonLoop and follow the next two paragraphs for camera and controller connection. For these steps you just need to connect the sensor and the controller to the computer with the USB cable. The physical connections are described in details in the next section.\n Connect to the camera To connect the camera of the wavefront sensor follow these steps:\n  Connect the wavefront sensor with the provided USB cable to your PC. The cable is an USB 3, if you use another cable the frame rate would be reduced according to USB2 bandwidth;\n  In PhotonLoop, select the appropriate driver (sensor settings widget);\n  Load the camera profile contained in the file Snxxxxx.wfs in the USB stick. The serial number of your sensor Snxxxx is written on the camera.\n  Click on the camera connection button .\n   Now you can see the live image stream on the viewfinder widget.\n  Connect to deformable mirror or lens The connection on the controller is a little bit longer than the procedure for camera connection, just follow these steps:\n  Connect the USB cable of the PZT mini to your PC (do not connect to the adaptive lens to the controller with the multi-wire pin cable at this stage because you donÔÇÖt have the voltage control yet);\n  The right LED on the PZT Mini switch ON if it is correctly connected;\n  Open Zadig (2.2 or newer version, the executable is present in the memory stick);\n  On the Options Tab press List All Devices; \n  Choose the HV-Driver rev.x device and replace the current driver with WinUSB driver;\n  In PhotonLoop, select the appropriate driver (WFC settings widget);\n  In Channels set the number of actuators of your deformable mirror or lens (this value depends on your device);\n  Change the voltage Minimum and Maximum (see table below for values depending on the device). It is important to set the voltage limits to prevent device breakdown. Please note that the PZT Mini is firmware limited according to your deformable mirror/lens limits.\n    Connect the DM or DL to PZT mini using the multi-wire cable. The cable has male connectors and the mirror, lens and controller have female, see picture below respectively for male and female connectors;\n       \n \n     Click on the lens/mirror connection button .\n   Now you can control the actuators voltage from the actuators bars and actuators table widgets.\n Table below reports a list of standard settings for some deformable lens and mirror with different controller.\n            Device Controller Driver/Plugin Actuators Minimum Center Maximum     AOL1810\n Pzt-Mini\n UsbHvDriver\n 18\n -0.5\n 0\n 1\n   AOL1816\n Pzt-Mini\n UsbHvDriver\n 18\n -0.8\n 0\n 1\n   AOL1825\n Pzt-Mini\n UsbHvDriver\n 18\n -0.8\n 0\n 1\n   DM6425\n Pzt-Mini\n UsbHvDriver\n 64\n -0.5\n 0\n 1\n   DM12820\n Pzt-Multi\n PZTMulti\n 128\n -0.5\n 0\n 1\n   DM12820\n Pzt-Multi\n Titan\n 128\n 0.25\n 0.5\n 1\n   DM3624\n Pzt-Stack\n UsbHvDriver\n 36\n 0\n 0.375\n 0.75\n   DM1010\n Pzt-Stack\n UsbHvDriver\n 10\n 0\n 0.5\n 1\n    Be sure to insert the correct values, verify in your deformable mirror/lens datasheet the limits of your device.\n      "},{"uri":"/userguide/wavefront-measurement.html","title":"Wavefront Measurement","tags":[],"description":"","content":"An accurate wavefront measurement is very important for metrology applications and for appropriate adaptive optics operation. Errors in measurements setting might causes system instability and if the relative errors are very high the system may not work.\n Create measure grid and adjust camera settings All the buttons and options for these steps are in the following toolbox that you can find in the viewfinder widget.\n To display spots and measurements grid click on  and  buttons respectively. Now you can create the measurements grid around the area of spots that you decide to consider. Click on  and trace the grid over the spots.\n First off all you need to set the exposure of the camera until you see well defined spots image from the SHWFS, to set the exposure button and use the scroll bar in the Camera tab of the window that comes out.\n At this stage you can fine tune the exposure time and the filter threshold for spot detection. We suggest a 90% of saturation for pixels and a threshold on spot detection just above the background noise of the sensor. These settings are easily set with in PHOTONLOOP.\n   \n Use the button  in the main toolbox to automatically center the grid.\n Finally, you will see a grid like this:\n \n If the aperture is circular like in the example used for this guide use the Force Circular Aperture button  to exclude the area of the grid in the corner of the measured square.\n Now regulate exposure and gain of the camera in the Camera tab and set the options for centroid extraction in the relative tab.\n \n The vertical line in the plot profile show the level and the shape of the threshold you are considering. The acquired images of the spots are analyzed to reconstruct the wavefront.\n If some spots are not well defined or blink, they may cause problems to the measurements. Use this button  to exclude them.\n Options for data elaboration can be found in Settings Tab and then Modal Tab.\n \n Here you can set number of modes used for in the wavefront reconstruction. The oversampling sets the number of points for wavefront graphical representation. Finally you can choose if display Zernike Offsets, Real wavefront or both (Real+Offset) resulting wavefront.\n Now you can start the measurements process with  button in the main toolbox, PHOTONLOOP will measure the wavefront inside the grid for each frame taken by the camera.\n The last three buttons ,  and  on the display toolbox are used to show the excluded spots, the considered spots and the slopes of the wavefront respectively.\n You can use the crop button  to make an area of interest (AOI), this allow the system to work at a higher frame rate. To increase the frame rate, after pressing crop, put the new frequency in the WPS tab. If the frequency will be higher than the maximum allowed, the system will go to the maximum possible frequency.\n You can find more details about centroid calculation options in this paper:\n S. Thomas et al, Comparison of centroid computation algorithms in a Shack-Hartmann sensor, Mon. Not. R. Astron. Soc. *371,* 323-336 (2006).     Read measurements The results of wavefront measurements are displayed in the bottom part of the main window. Here you can see the Zernike decomposition in a histogram and the wavefront reconstruction. For both histogram and graph, you can choose display options like graph type, scale and color. Just click on the star button * in the bottom right corner of the graph areas.\n \n   "},{"uri":"/userguide/compensation.html","title":"Aberration Correction","tags":[],"description":"","content":"Calibration of the AO system After conjugation and definition of the grid it is possible to perform the calibration of the system. Not that the calibration and also AO functions need an accurate measurement of the wavefront. Before start be familiar with the wavefront measurement. Go in the Calibration Tab and you will find all the calibrations parameters. These parameters can be divided in three main blocks, as shown in the next figure.\n \n In the Calibration Options block, you can choose:\n   The Pattern of the calibration (individual Poke or Hadamard global poke)\n  The Amplitude of the actuators during the calibration\n  The stabilization time period between the actuation and the measure of the deformation is set with Setting Time\n  The measure of the calibration results from the average of the number of frames specified by Frames Taken\n  Selecting Symmetric Poke the calibration is performed symmetrically in respect to the center command value\n   In the Calibration Commands block, you can: run the calibration:\n   Run the calibration clicking on Perform Calibration.\n  Load a saved calibration clicking on Load Calibration and selecting the stored measure.\n  Inspect the actual calibration clicking on Inspect Calibration.\n   Pressing Perform Calibration, you can monitor the process while it is running looking at the wavefront reconstruction and actuators histogram. During the calibration the measurements are taken with relative reference.\n Click on Inspect Calibration to verify the goodness of the calibration, in the following we report modes of a 18 actuators deformable lens and influence functions (note that modes are represented as phase map and influence functions are represented as interferograms):\n \n Besides to the Actuators Modes and the Actuators response, a Correlation graph is shown in the Inspect calibration. This graph reveals graphically the degree of orthogonality of the elements. If the diagonal is well defined it means that we have a good separation.\n You can save the calibration in the log window, when you take a snapshot the control matrix and influence function will be saved in the specified folder. You can load the calibration with Load Calibration button.\n Each mode of the mirror/lens has its own gain that is related to the dynamic range used by the deformable element to generate the mode itself. Low order modes have a higher gain, it means that the system will use a smaller dynamic range to generate that mode. The last modes with a smaller gain belong to high order and they require a lot of dynamic when the deformable element try to reproduce them. Once the Calibration is terminated the program will automatically display the System tab showing the SVD[1] window accessible from the right of the main page.\n \n When the histogram is displayed the modes can be added or removed using the SVD modes selection block:\n   Leave Remove Piston unselected. This setting must be selected before performing the calibration and only in the case of mirrors that integrates the Piezo-Stack technology.\n  Select Remove Global Tilt if you wish to exclude tip-tilt mode from the calibration.\n  System modes are the number of modes selected from the user.\n  SVD threshold set a threshold on the SVD gain in percentage. Below this value the modes are neglected.\n  SVD threshold set a threshold on the SVD gain in percentage. Below this value the modes are neglected.\n  Clicking on Discrete Selection of System Modes the user can remove (restore) selected modes clicking on the bars of the representation with the right (left).\n  Clicking on Reset Selection of System Modes the user will restore all the removed discrete modes.\n   Here in the figure below you can see an example of a System modes diagram without the SVD mode selection (left) and with the SVD threshold set to 10% and some discrete modes eliminated (right).\n  \n In this case is clear that deleting SVD modes reduce considerably the actuators efforts (red bars) but the optical quality of the wavefront is considerably reduced as well. In general, to preserve the optical quality increasing actuators dynamic, it is better to remove only the last SVD modes introducing only a threshold.\n   Closed Loop After the calibration it is possible to close the loop of the adaptive optic system. The wavefront data are used to control the deformable element. Go in the Controller Tab and Compensator Tab and you find the parameters for the controller. The parameters are:\n   Ki is the gain of the control system integrator, it goes from 0 to 1, but it can be forced to be more than one, this may be useful for system with low latency value.\n  Kb is the anti-wind-up of the integrator. It is important when actuators saturate. Without Kb the controller keeps on increase voltages over saturation value. Kb limits this effect deflating the exceeding voltage. In this way the controller is more reactive to exit the saturation zone. Initially set Kb to 0.\n  KAis theintegrator leakage. The controller accumulates numerical errors while is working that cause voltage signal to be more and more high to compensate aberrations. Ka is a loss factors that deflates the integrator to keep the dynamic at the initial value. The cost of this actions is that the control system does not executes perfectly the set point. Initially set Ka to 1.\n   Set the Ki parameter to low value, this is the gain of the closed loop, a high value means fast response of the system but it can also introduce instability.\n \n Be sure that the wavefront measurements is fine and then click on this icon [loop closed] to start the closed loop operation. The wavefront will be flatten down and you can read the residual RMS in the bottom right part of the main window in the wavefront reconstruction graph. Typical residual RMS value is around 0.04 waves.\n In closed loop is possible to generate Zernike modes. Act on the mode value in the histogram or insert the mode value in the utilities window. The deformable element will produce the indicated mode with a maximum strength defined by the dynamic of the devices. Below we can see the generation of the astigmatism and coma.\n  \n For this figure the wavefront display option in the above figure is set to Real. Change the display option from the panel below the modes representation as described in the next figure.\n \n The display options available to be selected are:\n   Real (It will represent the real state of the wavefront)\n  Both (it will display the wavefront considering the real wavefront with the offset subtracted)\n  Offset (it will display the wavefront considering only the offset introduced by the user)\n     Save flat voltage array and apply to device When you start the closed loop PHOTONLOOP will try to produce a flat wavefront. When this condition is reached it is possible to save the value of actuators (we call it Vflat) that level the deformable optics to zero phase shift. Now click on this icon [log snapshot] and save the actuator value with the snapshot button.\n \n To load the flat voltage array, go to Controller Tab and chose to load ([folder]) the folder containing file with voltage vector then press Apply Vflat. The flat voltage settings will always be added to start from a better initial wavefront. To remove the voltage flat click again on Apply Vflat. The Vflat array can be used in Open Loop mode where you donÔÇÖt use the wavefront as a control feedback, see next section. Click on Mode offsets or Actuators offset if you want to load the Zernike modes or the Actuators voltages that level the lens, respectively.\n Another way to apply the Vflat is directly applying the actuator offsets from the saved file actuators .txt that can be found in the Vflat folder. In order to do so, go to Utilities then select Actuators Panel and then load ([folder]) the actuators.txt file present in the Vflat folder. After [power] is pressed the actuators offset will be applied. And the lens will be flat. This method can be used also to load the actuators voltages for any kind of pre-generated and saved optical deformation of the lens.\n \n   Open Loop If you do NOT have the wavefront sensor start here, (if you have the wavefront sensor skip this section). Go to WFS tab and in the menu of the driver choose File sensor Vx.x. From Version 1.5.1 select Test sensor. Then press the camera connection button and select any white image in .jpg format of any size. Draw a new grid, select a circle aperture and start the measurements. To operate the system without the wavefront sensor feedback you have to upload the preset voltage flat (Vflat) and the influence functions. 1) Load the voltage set of the actuator that flatten the deformable element as describe above. 2) Go to Calibration, press Load calibration and select the folder where your calibration has been saved. The press relax and press open loop button and the wavefront will be flat, see figure below:\n \n Now, as in the case of closed loop, clicking on the green histogram you can change the modes offsets and generate it. Few examples are shown below for coma term (In this measure the wavefront sensor was used only as observer):\n \n and for trefoil:\n \n You can also use the Utilities Modes to select the modes inserting the values manually. The amount are in waves RMS.\n If you have the wavefront sensor start here\n Just click on the open loop button an interact with the Zernike modes histogram to generate the wavefront shape that you desire.\n    1. SVD: singular value decomposition. See: https://en.wikipedia.org/wiki/Singular_value_decomposition   "},{"uri":"/userguide/tcpip.html","title":"TCP-IP","tags":[],"description":"","content":"System Requirements   PhotonLoop 1.5.8.3 (or later)\n  Matlab communication libraries\n   \n   Files In the Folder TCP_IP_PhotonLoop1.5.8.3:\n   PhotonLoopCommunication.dll C comunication library\n  PhotonLoopCommunication_lib.m MATLAB comunication library\n  PhotonLoopCommunication_interface.m MATLAB and lib.thunk interface\n  PhotonLoopCommunication_thunk_pcwin64.dll MATLAB and C library interface\n  TCPIPExample.m MATLAB example\n   Here it is described the step by step procedure to modify the actuators of a deformable mirror with TCP-IP protocol without measuring or monitoring the wavefront in PhotonLoop.\n Refer to PhotonLoop and QuickstartGuide provided manuals for further details. You can find these manuals in the provided USB stick.\n   Connect the deformable mirror and modify actuators using TCP-IP protocol  Go to Utilities tab\n  Go to Network panel \n  Activate the TCP-IP Server \n  Open MATLAB\n  Set MATLAB path pointing the folder TCP_IP_PhotonLoop1.5.8.3:.\n  Write in MATLAB the command: h = PhotonLoopCommunication_lib();\n  If everything is set up correctly the TCP-IP server says Connected; \n  Now the code below can be run ant it will modify the first actuator of the mirror.\n     "},{"uri":"/userguide/plugins.html","title":"Plugins","tags":[],"description":"","content":" The sensor, WFC and compensator sections of PhotonLoop are populated by plugins. Upon starting, PhotonLoop scans the plugin inside the plugin folder /plugins/ located at the root of the PhotonLoop installation directory.\n If a plugin is not listed then it is likely that some of its dependencies are not met. Be sure to install the appropriate drivers before starting PhotonLoop.\n   Sensor Plugins Select the sensor driver from within the sensor settings widget.\n       Item Description     FileSensor\n Opens a 8bpp image file. Can continously check for changes in the image file (useful for getting the image output of third party software).\n   FirstLight\n Interface for the FirstLight cameras.\n   IdsSensorDriver\n Opens the iDS camera sensor connected via USB. In presence of multiple iDS camera connected, it tries to open the first one in cronological order that is not already opened.\nSelect external trigger to sync the camera with an external signal.\n     IMX174-DH\n Interface for the Daheng Imaging cameras.\n   RawSensor\n Opens a raw image file. Upon choosing the file, it is necessary to fill in the image properties. Can continously check for changes in the image file (useful for getting the image output of third party software).\n   RemoteSensor\n Connects to a remote image provider.\n   ScreenCaptureSensor\n Captures the desktop screen. Useful for getting the image output of third party software.\n   SPC3SensorPlugin\n Interface to the Micro Photon Device SPC3 camera\n   TestSensor\n Sample image generation with multiple patterns and variations.\n   DirectShowWfs\n Interface to the DirectShow Cameras.\n   OpenCvDriver\n Opens a video file from the file system.\n      WFC Plugins Select the WFC driver from within the WFC settings widget.\n Once a WFC plugin is loaded, please carefully set the voltage limits associated to the specific plugin and the specific adaptive optical element.\n         Item Description     PztMulti\n Interface to Dynamic Optics mirrors or lenses.\n   TestActuators\n Controller for test purposes.\n   UsbHvDriver\n Interface to Dynamic Optics mirrors or lenses.\n   IrisAOWfc\n Interface to IRIS mirrors.\n   OkotechMembraneWfc\n Interface to Okotech mirrors.\n   ThorlabsWfc\n Interface to THORLABS mirrors.\n      Compensator Plugins Select the compensator from within the compensator settings widget.\n The parameters in this section must be adjusted very carefully. Some settings may lead to self-oscillation.\n         Item Description     PI Enhanced Compensator\n Compensator that implements a Proportional-Integrative controller with anti wind-up and optimization of saturated commands.\n       Item Description     kP\n Proportional gain. The control action is proportional to the measured error. Larger coefficient values will make the system more reactive but also more sensitive to noise.\n   kI\n Integral gain. The control action is proportional to the integral over time of the measured error. Larger coefficient values will minimize the error faster but will also introduce oscillations.\n   kB\n Anti wind-up gain. The anti wind-up discharges the integral when the actuators are saturating, so that they do not build up indefinitely. Larger values will discharge the integral faster but will also produce discontinuities.\n   kA\n Integral gain leakage. Determines the leakage ratio of the integrator, which is useful to avoid getting stuck in expensive actuator configurations. Smaller values (\u0026lt;\u0026lt; 1) will search for alternative configurations more aggressively but the error will not be completely zeroed out.\n   Optimize Saturated Commands\n Enables the bounded optimization method. When actuators are saturating, this method computes the optimum actuators configuration to minimize the error.\n   Additional Optimization Polishing\n In combination with the bounded optimization, performs a more aggressive optimization to improve the solution at the expense of computational complexity.\n         "},{"uri":"/widgets.html","title":"Widgets","tags":[],"description":"","content":"This section lists the widgets\n== Quick description of User Interface\nThe user interface can be divided in many panels, see figure below. First of all, you can find the main toolbox in the left (1) and the Shack-Hartmann image acquisition and display options toolbox on top (2). The first toolbox contains the connection buttons for camera and controller, measurements start/stop and button for the main AO operations such as closed and open loop mode.\nThe panel Tab (3) contains four tabs: Settings, Calibrations, Controller and Utilities. In all these tabs you can find many parameters to set. We will explain them during the description of the functions. The space in the center of the window (4) is occupied by images and graphs depending on the tab selected in the right part.\nIn the bottom part of the window are displayed the sensor statistics (5), the Zernike decomposition and the value of the selected mode (6), the actuators histogram (7) and the reconstruction of the wavefront (8). The status bar of PHOTONLOOP is displayed in a small horizontal space in the bottom of the window.\nimage:/img/image23.png[]\nThe panels 6 and 7 are interactive and you can drag the histograms bars to change their value. In the Zernike coefficients Bar plot (6) it is possible to interact with the Zernike coefficients to add offset coefficients and to select Zernike modes. Set offsets with the left mouse button, reset offsets with the right mouse button and disable measured coefficients with the mouse wheel.\nThe actuators histogram (7) is interactive and you can play with the single actuator to set any value. Graphs and various values are displayed when the pointer goes over the bar of the histograms. Offset, coefficient and phase representation of the mode are shown moving the mouse pointer on the bars in the histogram (6); Offsets, values and influence functionsfootnote:[Influence functions are calculated during calibration of the AO system. They will be described in the section dedicated to Calibration procedure.] are shown moving the mouse pointer on the actuators bar in the histogram (7).\nAlso, in the panel 4, where the SHWFS spots are displayed in the WFS Tab, you can interact with measurement grid, the various options will be described in the next section relative to wavefront measurement.\n Actuators Bars  The actuators bars widget gives the user a graphical representation of the actual state of the WFC actuators: The red bars display the actual WFC output commands; The orange slimmer bars display the command offsets. The Y range and baseline are fixed and are determined by the WFC specifications (minimum, maximum and center). An actuator is selected when hovering over its corresponding bar.\n Actuators Response  Actuators Response The actuators response widget shows the wavefront representation of all actuator responses. Clicking with the right mouse button pops up the display settings: Item Description Scale Determines the zoom level of the wavefront representation. Representation Determines how the wavefront relative to the selected bar is displayed into the preview snippet.\n Actuators Table  The actuators table widget presents the current state of the WFC actuators as a grid, with each row representing an actuator index. Item Description # Actuator index. Image Actuator response wavefront. Value Current actuator command output. Offset Actuator command offset. Editing the Table The table view is useful to enter precise values for the desired indexes.\n Calibration Settings  The calibration settings widget exposes the parameters used by the AO calibration routine. The calibration can only be performed once a reference has been taken and a WFC plugin is succesfully opened. Pattern configuration Poke pattern Item Description Influence Function (Individual Poke) One actuator is poked at once. Useful when the actuators exhibit strong non-linear behaviour.\n Compensator Settings  Within the compensator settings widget it is possible to choose the control law, its parameters and additional robustness settings. Available compensators are listed as plugins. Robustness These parameters can help avoiding unexpected behaviors from the AO closed loop operations, such as to shut down the loop when the controller is self-oscillating or the sensor image is partially covered. Item Description Centroids Threshold Halt\n Intensity Profile  The intensity profile widget shows the horizontal intensity profile of the viewfinder image. The horizontal line considered in the intensity profile widget can be set using the cross tool in the viewfinder widget. Within the profile plot are shown various items: The blue curve corresponds to the intensity over the horizontal line; The red curve corresponds to the intensity over the horizontal line that contains the pixel with the maximum intensity in each lenslet;\n Log Toolbar  The log toolbar manages the logging/reporting utility to save both dynamic (real-time) and static data to disk. Item Description Log title Title of the log that will appear in the newly generated folder. Starts the log, creating a new folder. To stop the log, press the button again.\n Modal Bars  The modal bars widget gives the user a graphical representation of the actual state of the modal reconstruction: The green bars display the measured modes; The light green slimmer bars display the modal offsets; The red crosses indicate disabled modes. A mode is selected when hovering over its corresponding bar. While hovering, the preview snippet shows the numerical values and mode wavefront representation of the currently selected mode index.\n Modal Settings  The modal settings widget shows the wavefront reconstrutor parameters. Item Description Basis Selects the basis used to project WFS measurements into modes: Item Description Zernike Zernike basis. Indicated for circular apertures; Zernike Orthogonal Basis obtained by orthogonalizing the Zernike basis;\n Modal Table  The modal table widget presents the current state of the modal reconstruction as a grid, with each row representing a mode. # Mode index. Image Mode wavefront representation. Disabled Enable/disable the mode. Value Current measured mode. Offset Mode offset. Editing the Table The table view is useful to enter precise values for the desired indexes.\n Playback  The playback widget offers an interface to either reproduce a time series or execute a script. The script engine is deprecated in favor of the more flexible networking interface. Item Description Script Open a script file. Script Starts the script engine with the selected script file. Time Series\n Reconstructor Settings  The reconstructor widget processes the AO interaction matrix acquired with the calibration or loaded from disk. Item Description System Modes Count Number of system modes to consider for the reconstructor. Singular to Modal Disabled Indexes of the modes to remove from the reconstructor matrix. * Format example: \u0026#34;2,5,7-11\u0026#34; means that the modes at index 2, 5, and in the interval between 7 and 11 are removed.\n Sensor Settings   The sensor widget manages the interface between PhotonLoop and a connected camera. Available cameras are listed as plugins, with each plugin exposing different options.  Singular Bars  The singular bars widget gives the user a graphical representation of the singular values extracted from the Singular Value Decomposition of the interaction matrix. Each bar represents an individual singular mode, with the height determined by its singular value. A singular mode is selected when hovering over its corresponding bar. While hovering, the preview snippet shows the singular value and the wavefront representation of the currently selected index.\n Singular Table  The singular table widget lists the singular values in a table, with each row representing a singular mode. The system widgets will become enabled once an interaction matrix has been acquired. Item Description # Singular mode index. Image Singular mode wavefront representation. Value Singular value.\n Singular To Modal Bars  The singular to modal bars widget gives an indication of the maximum modal amplitudes achievable by the AO system. The displayed amplitude is referred to individual modes. A mode is selected when hovering over its corresponding bar. While hovering, the preview snippet shows the numerical values and actuator response of the currently selected mode index. Within the singular to modal bars widget it is possible to toggle the selected modes from the interaction matrix:\n Singular To Modal Table  The singular to modal table widget lists the modes that can be observed and controlled by the current AO calibration, along with their amplitudes. Editing the Table The table view is useful to enter precise values for the desired indexes. There are also some utilities that can be exploited to ease the table editing: Enable/Disable offsets.\n Statistics  The statistics widget shows textual real-time informations about the wavefront measurements. Item Description RoI Size of the Region of Interest set into the viewfinder. Lenslets Number of lenslets in the grid inscribed into the RoI. Centroids Number of valid centroids detected by the WFS. Radius\n System Modes  The system modes widget shows the wavefront representation of all singular modes. Clicking with the right mouse button pops up the display settings: Item Description Scale Determines the zoom level of the wavefront representation. Representation Determines how the wavefront relative to the selected bar is displayed into the preview snippet. Colormap\n Time Series  The time series widget displays the evolution over time of a scalar variable: The black curve represents the current measurement; The red thick curve represents the averaged current measurement. Item Description Resets the time series and the autoscale. Freezes the time series.\n TWCoG Settings  The TWCoG widget exposes the parameters of the Thresholded Weighted Center of Gravity (TWCoG) algorithm implemented into the WFS centroids extraction routine. The plot shows the pixel intensity transformation map. Item Description Threshold Pixel Percentage of the pixel intensity below which the pixel is not considered. Threshold Lens Percentage of the sum of the pixel intensities in a lenslet below which the lenslet is invalid.\n Viewfinder  With the viewfinder widget it is possible to display the sensor image and set the RoI. Item Description Draw tool When this tool is selected, it is possible to edit the Region of Interest (RoI) of the image. Cross tool When this tool is selected, a cross can be set and shown over the image.\n Wavefront  The wavefront widget shows the wavefront reconstructed from the measured modal terms. Refer to the modal settings widget to set the shape and resolution of the reconstructed wavefront. The widget will be enabled once a valid reference has been taken. Adjusting the wavefront display Hovering over the widget reveals the settings button that can be clicked to show the widget settings.\n WFC Settings  The WaveFront Corrector WFC widget manages the interface between PhotonLoop and a connected wavefront corrector. Available correctors are listed as plugins. Item Description Plugin Selects the desired plugin. Channels Number of channels to use. Some plugins automatically populate this field with the correct number of actuators. Minimum\n WFS Calibration  The wavefront sensor is delivered with the calibration file that can be loaded in PhotonLoop, and contains all the measured specifications. The calibration consists in a series of measurements of a spherical wavefront generated by a laser source at different distances between the SHWFS and source. The setup is very simple: Measure the spherical wavefront as described in Section 7. Draw a grid about 20x20 in dimensions, the maximum wavefront curvature is in the closest position to the source so be sure that the spots in the border of the considered aperture are inside their cell.\n WFS Settings  The WaveFront Sensor WFS widget defines the parameters to build the centroids extraction grid and the modal reconstruction. Item Description Pixel Size [m] Physical size of the camera pixels. Lenslet Size [m] Physical size of the lenslets of the Shack-Hartmann lenslet array. Divider If the camera operates in sub-sampling or binning mode, the pixel size must be updated accordingly by setting the divider (integer value).\n "},{"uri":"/test.html","title":"test","tags":[],"description":"","content":"Package Contents The devices supplied by Dynamic Optics for a standard adaptive optical system should include:\n      Item Description     \n PhotonLoop Dongle key.\nThis key will permit you to run PhotonLoop.\n   \n USB Memory Stick\nEach product from Dynamic Optics is delivered with a USB key containing the principal information (manuals and datasheet, etc..) regarding the purchased products.\n    Also, one or more WaveFront Corrector (WFC) as a Deformable Mirror (DM) orn Adaptive Optical Lens (AOL) should be included:\n      Item Description     \n Deformable mirror (Bimorph)\n   \n Adaptive Optical Lens (Bimorph)\n   \n Deformable Mirror (Piezo Stack)\n    A controller interfaces the PC to the WFC:\n      Item Description     \n PZT-Mini (external), USB 2.0 connection.\n   \n PZT-Multi (integrated or external), 10MB Ethernet connection.\n   \n PZT-Stack (external), USB 2.0 connection.\n    A Shack-Hartmann camera acts as the WaveFront Sensor (WFS) of the system:\n      Item Description     \n The WFS is equipped with its own USB 3.0 Cable. Its calibration profile is shipped within the provided USB memory stick.\n      PhotonLoop Installation System requirements PHOTONLOOP require at least the following specifications:\n   Dual Core Processor, 64 bit, 4GB ram;\n  Windows 7 Operating System.\n    Installing PHOTONLOOP and drivers All what you need for installation is provided with the USB stick, drivers and PHOTONLOOP installer. To install PHOTONLOOP and the relative drivers follow these steps, it is not necessary to connect the hardware to the computer at this stage:\n  If not already present in your PC install the iDS uEye driver package (4.80.2 or newer versions, the file is in the USB stick in the folder PHOTONLOOP/drivers);\n  If not already present in your PC install Microsoft Visual Studio 2017 (v14) x64 Runtime Package (VC_redist.x64.exe file is in the USB stick in the folder PHOTONLOOP/drivers);\n  Run PHOTONLOOP Installer, it can be found in the PHOTONLOOP folder of the USB stick and follow the procedure:\n Chose the installation folder that you prefer \n     Select the component to install \n  Read and accept the terms of usage, select the shortcuts location and proceed with the installation. \n  Insert the provided dongle key to use PHOTONLOOP in your computer. You can use PHOTONLOOP in one computer a time.\n      "},{"uri":"/widgets/actuatorsbars.html","title":"Actuators Bars","tags":["tag1","tag2"],"description":"","content":"\n The actuators bars widget gives the user a graphical representation of the actual state of the WFC actuators:\n   The red bars display the actual WFC output commands;\n  The orange slimmer bars display the command offsets.\n   The Y range and baseline are fixed and are determined by the WFC specifications (minimum, maximum and center).\n An actuator is selected when hovering over its corresponding bar. While hovering, the preview snippet shows the numerical values and actuator response of the currently selected actuator index.\n The actuator response is only shown after the AO system is calibrated.\n   Within the actuators bars widget it is possible to directly control the commands offset of the currently selected actuator:\n   Clicking the left mouse button changes the offset.\n  Clicking the right mouse button zeroes the offset.\n   It is possible to keep the mouse button depressed to keep editing the offset or reset multiple offsets.\n   The actuators widgets will become enabled once a WFC plugin is succesfully opened.\n   Adjusting the bars display The visualization settings can be accessed by clicking on the settings  icon located on the top right of the bars plot.\n \n       Item Description     Representation\n Determines how the wavefront relative to the selected bar is displayed into the preview snippet.\n   Colormap\n Determines the colormap of the wavefront.\n      "},{"uri":"/widgets/actuatorsresponse.html","title":"Actuators Response","tags":["tag1","tag2"],"description":"","content":"Actuators Response \n The actuators response widget shows the wavefront representation of all actuator responses.\n Clicking with the right mouse button pops up the display settings:\n       Item Description     Scale\n Determines the zoom level of the wavefront representation.\n   Representation\n Determines how the wavefront relative to the selected bar is displayed into the preview snippet.\n   Colormap\n Determines the colormap of the wavefront.\n    The system widgets will become enabled once an interaction matrix has been acquired.\n     "},{"uri":"/widgets/actuatorstable.html","title":"Actuators Table","tags":["tag1","tag2"],"description":"","content":"\n The actuators table widget presents the current state of the WFC actuators as a grid, with each row representing an actuator index.\n       Item Description     #\n Actuator index.\n   Image\n Actuator response wavefront.\n   Value\n Current actuator command output.\n   Offset\n Actuator command offset.\n    Editing the Table The table view is useful to enter precise values for the desired indexes. There are also some utilities that can be exploited to ease the table editing:\n     \n Enable/Disable offsets.\n   \n Load offsets from file.\n   \n Save current dataset to file.\n   \n Set to zero all offsets.\n    The actuators widgets will become enabled once a WFC plugin is succesfully opened.\n   The actuator response is only shown after the AO system is calibrated.\n     "},{"uri":"/widgets/calibration.html","title":"Calibration Settings","tags":["tag1","tag2"],"description":"","content":"\n The calibration settings widget exposes the parameters used by the AO calibration routine.\n The calibration can only be performed once a reference has been taken and a WFC plugin is succesfully opened.\n   Pattern configuration Poke pattern       Item Description     Influence Function (Individual Poke)\n One actuator is poked at once. Useful when the actuators exhibit strong non-linear behaviour.\n   Hadamard (Global Poke)\n All actuators are poked at once. Doing so increases the signal to noise ratio, even at lower pattern amplitude.\n     Poke direction       Item Description     Symmetric poke (Up and Down)\n The poke is performed in both direction. The minimum of the distance between WFC center and maximum/minimum is taken into consideration to avoid saturation. The result is then averaged.\n   Asymmetric poke (Up)\n The poke is performed with positive commands.\n   Asymmetric poke (Down)\n The poke is performed with negative commands.\n       Parameters       Item Description     Ampltude\n Amplitude of the poke pattern. It is relative to the maximum travel of the actuator.\n   Settling Time [s]\n Time delay between actuation and measurement. If it is too small, the WFS measurement will be incorrect.\n   Frames Taken\n Number of consecutive measurements taken after settling time. The measurement frames are then averaged to improve signal to noise ratio.\n      Commands       Item Description      Perform Calibration\n Start the calibration routine. The calibration can be stopped by changing the controller status (e.g. zero button).\n    Load Calibration\n Loads a previously taken calibration from a report folder.\n     When loading a calibration, the number of WFC actuators must match with the number deduced from the loaded report.\n  If no reference has been set, loading a calibration will automatically set the previously taken reference. This is beneficial to the reconstructor quality, as no conversion are necessary.\n     "},{"uri":"/categories.html","title":"Categories","tags":[],"description":"","content":""},{"uri":"/categories/category1.html","title":"category1","tags":[],"description":"","content":""},{"uri":"/widgets/compensator.html","title":"Compensator Settings","tags":["tag1","tag2"],"description":"","content":"\n Within the compensator settings widget it is possible to choose the control law, its parameters and additional robustness settings. Available compensators are listed as plugins.\n Robustness These parameters can help avoiding unexpected behaviors from the AO closed loop operations, such as to shut down the loop when the controller is self-oscillating or the sensor image is partially covered.\n       Item Description     Centroids Threshold Halt\n Percentage of the number of detected centroids below which the compensator automatically halts.\n   Max Actuators Variance\n Percentage of the actuators variance over time above which the compensator automatically halts.\n      "},{"uri":"/","title":"Home","tags":[],"description":"","content":"PhotonLoop is a high performance wavefront measurement and correction software.\nIt interfaces to the Shack-Hartmann WaveFront Sensor (WFS) and the WaveFront Corrector (WFC) consisting in deformable mirrors or lenses. All the operations are aided with a friendly Graphical User Interface (GUI). Using it with hardware components provided by Dynamic Optics allows to easily to create an Adaptive Optics (AO) system able to work in many applications such as:\n Communication system; High power lasers; Microscopy; Ophthalmology; Astronomy.  PhotonLoop can work up to 1kHz and offers the possibility of data logging and remote control (with TCP-IP).\nIn this manual we describe the main functions of the software making reference to a typical setup for adaptive optics. We will describe its use using snapshots. As an adaptive optics setup is very demanding a fine tuning, please contact us if necessary.\nContacting Dynamic Optics: Dynamic Optics S.R.L.,\nPiazza Giacomo Zanellato 5, torre 1,\n35131 Padova (PD) - Italia\n Phone: +39 391 7993796 Web: http://www.dynamic-optics.eu/  "},{"uri":"/widgets/intensityprofile.html","title":"Intensity Profile","tags":["tag1","tag2"],"description":"","content":"\n The intensity profile widget shows the horizontal intensity profile of the viewfinder image. The horizontal line considered in the intensity profile widget can be set using the cross tool  in the viewfinder widget.\n Within the profile plot are shown various items:\n   The blue curve corresponds to the intensity over the horizontal line;\n  The red curve corresponds to the intensity over the horizontal line that contains the pixel with the maximum intensity in each lenslet;\n  The green curve displays the pixel threshold level (set in the TWCoG widget).\n   "},{"uri":"/widgets/log.html","title":"Log Toolbar","tags":["tag1","tag2"],"description":"","content":"\n The log toolbar manages the logging/reporting utility to save both dynamic (real-time) and static data to disk.\n       Item Description     Log title\n Title of the log that will appear in the newly generated folder.\n   \n Starts the log, creating a new folder. To stop the log, press the button again.\n   \n Pauses the log. The index counter increments by one.\n   \n Generates a log with only one sample into a new folder.\n   \n Opens the log settings.\n    Log Settings \n       Item Description     Folder\n Root folder in which newly generated logs are placed to.\n   Prepend Datetime\n Prepends the current date/time to the newly created folders.\n   Freeze Time when Paused\n Stops the measured time between pause/start log.\n   Format\n Data format. ASCII is preferred when an human readable form is needed, otherwise Binary is more accurate while minimizing used space.\n   Timeout\n If greater than zero, determines the maximum log length in seconds. When the timeout expires, the log is automatically stopped.\n    Record Time Series/Static The checkboxes enable/disable saving individual kind of data.\n Static data such as AO settings, reconstructor matrices, spot image and centroids are always saved to disk.\n   With PHOTONLOOP you can save the current measurements and the related settings of the software and also record the measurements for a period of time.\n You can set the time for recording in the Timeout specifying the time in seconds. Then check the data that you want to save:\n   time in seconds\n  slops are the wavefront gradient\n  centroids are the x-y positions of spots\n  moments\n  Zernike are coefficients RMS in meter,\n  Zernike offset in meter\n  actuators value in normalized voltages\n  actuators voltages offset\n  wavefront phase to generate a file that can be loaded in Zemax\n  html file report.\n   The saved files contain all the information to generate a report of the measurement and, for example, the centroids_reference.txt can be used to load the measurements grid in a second moment.\n To save the report click on the log button , a new window will open. In this window you can specify the type of data to record, the title of the folder and the saving path. Then press snapshot or record.\n \n    Display the measurements You can immediately open the report clicking in the Open HTML Report…​ button in the log window, the browser will automatically start or you can display the report with the HTML file in the saved folder. We recommend Mozilla Firefox as browser. An example of report is in the next figure.\n \n   Load wavefront data as grid phase in Zemax In this version it is also possible to save a file containing the wavefront data that can be loaded as a Grid Phase map in Zemax 13 and later version. The grid phase file can be saved in the log window, just flag on Generate Wavefront (Zemax) and press on the Snapshot button. The saved folder contains a file wavefront.dat with a series of data like this (units in millimeters):\n 28 28 0.15 0.15 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0.620259 0 0 0 -0.270376 0 0 0 -0.863329 0 0 0 -1.19881 0 0 0 -1.30754 0 0 0 -1.20996 0 0 0\n In the first row, the first two numbers (28 in this case) indicate the number of measuring points, 28 by 28 for each side of the grid. 0.15 indicates the pitch in mm of the wavefront sensor. Starting from the second row the table contains the wavefront data. All the rows with zeros that follow are relative to the area of the frame out of the circular aperture, the number 1 in the end of the row indicates that the data point is now valid. The last few rows with a non zero value in the first column are the phase of the wavefront (in radiant). A better description of the file format can be found in the Zemax manual. Note that if you want to refer you wavefront data to the aperture of the optical system you need to consider the magnification factor the relay optics that re-image the aperture into the lenslet array. So, in this case if you want to refer the wavefront data to an aperture of 300 mm in diameter just chance 0.15 mm with 300/28=10.7 mm.\n   "},{"uri":"/widgets/modalbars.html","title":"Modal Bars","tags":["tag1","tag2"],"description":"","content":"\n The modal bars widget gives the user a graphical representation of the actual state of the modal reconstruction:\n   The green bars display the measured modes;\n  The light green slimmer bars display the modal offsets;\n  The red crosses indicate disabled modes.\n   A mode is selected when hovering over its corresponding bar. While hovering, the preview snippet shows the numerical values and mode wavefront representation of the currently selected mode index.\n Within the modes bars widget it is possible to directly control the modes offset of the currently selected mode:\n   Clicking the left mouse button changes the offset.\n  Clicking the right mouse button zeroes the offset.\n  Clicking the middle mouse button enables/disables the mode.\n   It is possible to keep the mouse button depressed to keep editing the offset or reset multiple offsets.\n   Settings The visualization settings can be accessed by clicking on the  located on the top right of the bars plot.\n \n       Item Description     Scale\n Scale of the Y axis (in waves).\n   Autoscale\n Scales the bars according to the minimum/maximum values.\n   Show Values\n Adds a vertical numbered axis on the left of the bars.\n   Representation\n Determines how the wavefront relative to the selected bar is displayed into the preview snippet.\n   Colormap\n Determines the colormap of the wavefront.\n    The modal widgets will become enabled once a reference is taken.\n     "},{"uri":"/widgets/modal.html","title":"Modal Settings","tags":["tag1","tag2"],"description":"","content":"\n The modal settings widget shows the wavefront reconstrutor parameters.\n       Item Description     Basis\n Selects the basis used to project WFS measurements into modes:\n       Item Description     Zernike\n Zernike basis. Indicated for circular apertures;\n   Zernike Orthogonal\n Basis obtained by orthogonalizing the Zernike basis;\n   Legendre\n Legendre basis. Indicated for rectangular apertures;\n   Legendre Orthogonal\n Basis obtained by orthogonalizing the Legendre basis.\n      Support\n Determines the shape of the reconstructed wavefront:\n       Item Description     Standard\n The wavefront is shaped like the ideal theoretical shape from the selected basis;\n   Reference\n The wavefront is shaped with respect to the topology of the detected centroids in the reference;\n   Intersect\n The wavefront is shaped as the intersection of Standard and Reference shapes.\n      Modes\n Number of modes to consider. A number of modes too large will result in spatial aliasing.\n   Resolution\n Image resolution of the wavefront. All the wavefront displayed are affected by this setting.\n   Update Modal Base\n Replaces the currently set modal basis with a new one using the currently set parameters.\n    Setting the modes number too high might result in spatial aliasing, i.e. ambiguity in the decomposition.\n   Large resolution settings will lead to reduced performance due to the increase in CPU computation.\n   The closed loop mode is agnostic from the modal settings.\n   "},{"uri":"/widgets/modaltable.html","title":"Modal Table","tags":["tag1","tag2"],"description":"","content":"\n The modal table widget presents the current state of the modal reconstruction as a grid, with each row representing a mode.\n     #\n Mode index.\n   Image\n Mode wavefront representation.\n   Disabled\n Enable/disable the mode.\n   Value\n Current measured mode.\n   Offset\n Mode offset.\n    Editing the Table The table view is useful to enter precise values for the desired indexes. There are also some utilities that can be exploited to ease the table editing:\n     \n Enable/Disable offsets.\n   \n Load offsets from file.\n   \n Save current dataset to file.\n   \n Set to zero all offsets.\n    The modal widgets will become enabled once a reference is taken.\n     "},{"uri":"/widgets/playback.html","title":"Playback","tags":["tag1","tag2"],"description":"","content":"\n The playback widget offers an interface to either reproduce a time series or execute a script.\n The script engine is deprecated in favor of the more flexible networking interface.\n         Item Description      Script\n Open a script file.\n    Script\n Starts the script engine with the selected script file.\n    Time Series\n Open a time series file.\nWhen a time series is loaded, the statistics section displays informations about the decoded data..\n     Play as\n Target of the time series file:\n       Item Description     Zernike\n Play the time series as Zernike offsets;\n   Actuators\n Play the time series as actuators offsets.\n      Behaviour\n Determines the action after the time series finishes:\n       Item Description     One-Shot\n Do not replay the time series;\n   Loop\n Replay the time series.\n      Sync to\n Determines the clock to which the time series is synchronized:\n       Item Description     Custom\n Set the custom clock frequency;\n   Controller\n Use the control loop clock;\n   Timestamps\n (unsupported) Advance each sample according to its associated timestamp.\n      Scale\n Scale of the time series. At 1, the time series is not scaled.\n    Time Series\n Play the time series. Click the button again to stop the time series.\n   Start when Recording\n Let the time series start right after a log operation started.\n    "},{"uri":"/widgets/reconstructor.html","title":"Reconstructor Settings","tags":["tag1","tag2"],"description":"","content":"\n The reconstructor widget processes the AO interaction matrix acquired with the calibration or loaded from disk.\n       Item Description     System Modes Count\n Number of system modes to consider for the reconstructor.\n   Singular to Modal Disabled\n Indexes of the modes to remove from the reconstructor matrix.\n* Format example: \u0026#34;2,5,7-11\u0026#34; means that the modes at index 2, 5, and in the interval between 7 and 11 are removed.\n   Remove Piston\n Removes the unmeasurable piston mode from the reconstructor, minimizing the actuators effort into reconstructing the wavefront. On some AO systems it might be counter-productive, as some modes mimic the piston to be correctly represented.\n   Remove Global Tilt\n Removes the tip-tilt modes from the reconstructor.\n   Matrix Scale\n Scale te reconstruction matrix. Useful when the setup in which the AO system is calibrated differs from the setup in which the AO system is operative.\n   SVD Threshold\n Percentage of the amplitude of the system modes below which are removed from the reconstructor.\n    "},{"uri":"/widgets/sensor.html","title":"Sensor Settings","tags":["tag1","tag2"],"description":"","content":"\n The sensor widget manages the interface between PhotonLoop and a connected camera. Available cameras are listed as plugins, with each plugin exposing different options.\n "},{"uri":"/widgets/singularbars.html","title":"Singular Bars","tags":["tag1","tag2"],"description":"","content":"\n The singular bars widget gives the user a graphical representation of the singular values extracted from the Singular Value Decomposition of the interaction matrix. Each bar represents an individual singular mode, with the height determined by its singular value.\n A singular mode is selected when hovering over its corresponding bar. While hovering, the preview snippet shows the singular value and the wavefront representation of the currently selected index.\n Within the singular bars widget it is possible to cut the number of considered singular modes. Clicking the left mouse button over a singular mode sets it as the cutoff point.\n Singular modes represented by smaller singular values are more difficult to achieve (either because they are noisy or require more dynamics). If the closed loop performance is poor, consider to cutoff such modes.\n On the other hand, cutting off too many modes will reduce the spatial representation of the AO system.\n   The system widgets will become enabled once an interaction matrix has been acquired.\n   Unresolved directive in \u0026lt;stdin\u0026gt; - include::bars.adoc[lines=5..-1]\n "},{"uri":"/widgets/singulartable.html","title":"Singular Table","tags":["tag1","tag2"],"description":"","content":"\n The singular table widget lists the singular values in a table, with each row representing a singular mode.\n The system widgets will become enabled once an interaction matrix has been acquired.\n         Item Description     #\n Singular mode index.\n   Image\n Singular mode wavefront representation.\n   Value\n Singular value.\n    Editing the Table The table view is useful to enter precise values for the desired indexes. There are also some utilities that can be exploited to ease the table editing:\n     \n Enable/Disable offsets.\n   \n Load offsets from file.\n   \n Save current dataset to file.\n   \n Set to zero all offsets.\n      "},{"uri":"/widgets/singulartomodalbars.html","title":"Singular To Modal Bars","tags":["tag1","tag2"],"description":"","content":"\n The singular to modal bars widget gives an indication of the maximum modal amplitudes achievable by the AO system.\n The displayed amplitude is referred to individual modes.\n   A mode is selected when hovering over its corresponding bar. While hovering, the preview snippet shows the numerical values and actuator response of the currently selected mode index.\n Within the singular to modal bars widget it is possible to toggle the selected modes from the interaction matrix:\n   Clicking the left mouse button disables the mode.\n  Clicking the right mouse button enables the mode.\n   Adjusting the bars display The visualization settings can be accessed by clicking on the settings  icon located on the top right of the bars plot.\n \n       Item Description     Representation\n Determines how the wavefront relative to the selected bar is displayed into the preview snippet.\n   Colormap\n Determines the colormap of the wavefront.\n    The system widgets will become enabled once an interaction matrix has been acquired.\n     "},{"uri":"/widgets/singulartomodaltable.html","title":"Singular To Modal Table","tags":["tag1","tag2"],"description":"","content":"\n The singular to modal table widget lists the modes that can be observed and controlled by the current AO calibration, along with their amplitudes.\n Editing the Table The table view is useful to enter precise values for the desired indexes. There are also some utilities that can be exploited to ease the table editing:\n     \n Enable/Disable offsets.\n   \n Load offsets from file.\n   \n Save current dataset to file.\n   \n Set to zero all offsets.\n    The system widgets will become enabled once an interaction matrix has been acquired.\n     "},{"uri":"/widgets/statistics.html","title":"Statistics","tags":["tag1","tag2"],"description":"","content":"\n The statistics widget shows textual real-time informations about the wavefront measurements.\n       Item Description     RoI\n Size of the Region of Interest set into the viewfinder.\n   Lenslets\n Number of lenslets in the grid inscribed into the RoI.\n   Centroids\n Number of valid centroids detected by the WFS.\n   Radius\n Radius of the virtual circular aperture inscribed into the RoI.\n   Wavelength\n Wavelength of the incoming beam.\n   Frequency\n Camera frequency.\n   Wfs\n Computational latency of the WFS extraction routine.\n   Total\n Roundtrip latency of the AO controller.\n   Miss (I)\n Number of input frames skipped, expressed in frames per seconds. If greater than zero, it is suggested to reduce the computational complexity.\n   Miss (O)\n Number of output commands skipped, expressed in frames per seconds. If greater than zero, the WFC driver is unable to process all the outgoing commands.\n   RMS\n RMS of the measured wavefront, expressed in waves.\n   PV\n Peak to Valley of the measured wavefront, expressed in waves.\n   Strehl\n Strehl ratio of the measured wavefront, expressed in waves.\n    "},{"uri":"/widgets/systemmodes.html","title":"System Modes","tags":["tag1","tag2"],"description":"","content":"\n The system modes widget shows the wavefront representation of all singular modes.\n Clicking with the right mouse button pops up the display settings:\n       Item Description     Scale\n Determines the zoom level of the wavefront representation.\n   Representation\n Determines how the wavefront relative to the selected bar is displayed into the preview snippet.\n   Colormap\n Determines the colormap of the wavefront.\n    The system widgets will become enabled once an interaction matrix has been acquired.\n   "},{"uri":"/tags/tag1.html","title":"tag1","tags":[],"description":"","content":""},{"uri":"/tags/tag2.html","title":"tag2","tags":[],"description":"","content":""},{"uri":"/tags.html","title":"Tags","tags":[],"description":"","content":""},{"uri":"/widgets/timeseries.html","title":"Time Series","tags":["tag1","tag2"],"description":"","content":"\n The time series widget displays the evolution over time of a scalar variable:\n   The black curve represents the current measurement;\n  The red thick curve represents the averaged current measurement.\n         Item Description     \n Resets the time series and the autoscale.\n   \n Freezes the time series.\n   \n Start the time series.\n   \n Show the time series settings.\n    Settings \n       Item Description     Source\n Time series source.\n   Range\n Period of time to display at once.\n      "},{"uri":"/widgets/twcog.html","title":"TWCoG Settings","tags":["tag1","tag2"],"description":"","content":"\n The TWCoG widget exposes the parameters of the Thresholded Weighted Center of Gravity (TWCoG) algorithm implemented into the WFS centroids extraction routine.\n The plot shows the pixel intensity transformation map.\n       Item Description     Threshold Pixel\n Percentage of the pixel intensity below which the pixel is not considered.\n   Threshold Lens\n Percentage of the sum of the pixel intensities in a lenslet below which the lenslet is invalid.\n   Threshold Sigma\n Variance of the Gaussian shape applied to the threshold pixel values. The Gaussian is centered at the center of the RoI, and affects the threshold on a per-lenslet basis.\n   Saturation\n Percentage of the pixel intensity above which the pixel intensity is maximum.\n   Method\n Currently only the TWCoG method is implemented.\n   Weighting\n Weighting law of the pixel intensities.\n       Item Description     Linear\n The intensity is not weighted;\n   Quadratic\n The intensity value is squared;\n   Cubic\n The intensity value is elevated at the power of 3.\n    Weighting the pixel intensities emphatizes high intensity values, leading to better signal to noise ratio. However, the measurement will no longer be linear.\n   Box Size\n Lenslet margin outside which pixels are not considered.\n   Second Order Moments\n Calculate second order moments.\n    "},{"uri":"/widgets/viewfinder.html","title":"Viewfinder","tags":["tag1","tag2"],"description":"","content":"\n With the viewfinder widget it is possible to display the sensor image and set the RoI.\n       Item Description      Draw tool\n When this tool is selected, it is possible to edit the Region of Interest (RoI) of the image.\n    Cross tool\n When this tool is selected, a cross can be set and shown over the image.\n    Zoom tool\n When this tool is selected, it is possible to zoom into the selected region of the image.\n    Zoom reset\n Resets the zoom level to its default value.\n    Remove centroids tool\n When this tool is selected, it is possible to disable/enable lenslets within the RoI.\n    Crop image\n Crops the sensor image to the boundaries defined by the RoI.\n    Uncrop image\n Restore the image to its original size.\n    Circular aperture\n Disables the centroids outside the circle inscribed into the RoI.\n    Show image\n Show/hide image.\n    Show grid\n Show/hide grid.\n    Show reference\n Show/hide reference centroids.\n    Show centroids\n Show/hide measured centroids.\n    Show slopes\n Show/hide measured slopes.\n    Save image\n Save the current image to file.\n    Settings\n Show additional settings.\n    Drawing the RoI \n The RoI can be manipulated using the draw tool . Hovering over the image reveals the RoI boundaries (dashed lines):\n   Clicking and dragging the mouse outside the RoI discards the currently set RoI and begins drawing a new one;\n  Clicking and dragging the mouse on the edges or corners of the RoI (highlighted in blue) resizes the RoI;\n  Clicking and dragging the mouse inside the RoI (highlighted in blue) moves the RoI.\n     Adjusting the image display \n The viewfinder additional settings  are used to control how the image is displayed.\n       Item Description     Black level\n Percentage of the maximum pixel intensity corresponding to the minimum colormap value.\n   White level\n Percentage of the maximum pixel intensity corresponding to the maximum colormap value.\n   Colormap\n Image colormap.\n   Slopes Scale\n Length ratio of the displayed slopes.\n      "},{"uri":"/widgets/wavefront.html","title":"Wavefront","tags":["tag1","tag2"],"description":"","content":"\n The wavefront widget shows the wavefront reconstructed from the measured modal terms. Refer to the modal settings widget to set the shape and resolution of the reconstructed wavefront.\n The widget will be enabled once a valid reference has been taken.\n   Adjusting the wavefront display \n Hovering over the widget reveals the  settings button that can be clicked to show the widget settings.\n       Item Description     Scale\n Scale of the colormap (in waves), from zero to either direction. If the wavefront amplitude is greater/lower than the scale, the colormap wraps. Does not apply when the representation type is Interferogram.\n   Autoscale\n Dynamically scales the colormap to cover the entire amplitude of the wavefront. Does not apply when the representation type is Interferogram.\n   Type\n Representation type of the wavefront:\n       Item Description     Off\n The wavefront is disabled;\n   Phase\n Phase representation;\n   Smooth Phase\n Phase representation, with pixel-wise interpolation;\n   Interferogram\n Interferogram representation;\n   Smooth Interferogram\n Interferogram representation, with pixel-wise interpolation;\n   Super Smooth Interferogram\n Interferogram representation, with additional smoothing (computationally expensive);\n   PSF\n (Experimental) Point Spread Function (PSF) representation.\n      Colormap\n Colormap of the wavefront.\n   Show Actuators\n Show the actuators positions and values over the wavefront surface.\n    The actuators positions are only available after a valid calibration has been performed/loaded.\n     "},{"uri":"/widgets/wfc.html","title":"WFC Settings","tags":["tag1","tag2"],"description":"","content":"\n The WaveFront Corrector WFC widget manages the interface between PhotonLoop and a connected wavefront corrector. Available correctors are listed as plugins.\n       Item Description     Plugin\n Selects the desired plugin.\n   Channels\n Number of channels to use.\nSome plugins automatically populate this field with the correct number of actuators.\n     Minimum\n Minimum command value to be issued to the wavefront corrector.\n   Center\n Center value of the wavefront corrector command. This will set the actuators zero.\n   Maximum\n Maximum command value to be issued to the wavefront corrector.\n   Frequency\n Frequency of the sinusoidal function used in the anti-hysterisys routine.\n   Amplitude\n Amplitude of the sinusoidal function used in the anti-hysterisys routine.\n   Time\n Decay time of the sinusoidal function used in the anti-hysterisys routine.\n   Apply VFlat\n If available, applies the command required to flatten the wavefront corrector.\n    "},{"uri":"/widgets/wfscalibration.html","title":"WFS Calibration","tags":["tag1","tag2"],"description":"","content":"\n The wavefront sensor is delivered with the calibration file that can be loaded in PhotonLoop, and contains all the measured specifications. The calibration consists in a series of measurements of a spherical wavefront generated by a laser source at different distances between the SHWFS and source. The setup is very simple:\n \n Measure the spherical wavefront as described in Section 7. Draw a grid about 20x20 in dimensions, the maximum wavefront curvature is in the closest position to the source so be sure that the spots in the border of the considered aperture are inside their cell. For this measurement use a square aperture, DO NOT use the circular aperture option.\n PHOTONLOOP has a WFS calibration widget in the Calibration Tab of WFS Parameters window, to open the window click on . To add a point, click on Add Point, insert the measured distances between source and SHWFS (you can use a simple ruler) and press OK. In the table you will see the measured curvature radius and the real one written down before. Take around ten acquisitions at different distances starting from 0.20 m to 1 m.\n \n PHOTONLOOP try to interpolate the data when you add the measurements, all the points should stay along a straight line. Press Apply Parameters to WFS Profile when you finish the acquisition set. Now you can save the profile with the save button in the WFS Tab of Settings Tab.\n "},{"uri":"/widgets/wfs.html","title":"WFS Settings","tags":["tag1","tag2"],"description":"","content":"\n The WaveFront Sensor WFS widget defines the parameters to build the centroids extraction grid and the modal reconstruction.\n       Item Description     Pixel Size [m]\n Physical size of the camera pixels.\n   Lenslet Size [m]\n Physical size of the lenslets of the Shack-Hartmann lenslet array.\n   Divider\n If the camera operates in sub-sampling or binning mode, the pixel size must be updated accordingly by setting the divider (integer value).\n   Focal [m]\n Distance from the lenslet array to the pixel array.\n   Wavelength [m]\n Wavelength of the measured wavefront.\n   Slopes Amplitude\n Multiplier for the measured slopes values.\n   Average Samples\n Processes the slopes through a moving average filter.\n   Pupil Diameter [m]\n Aperture diameter.\n    "}]