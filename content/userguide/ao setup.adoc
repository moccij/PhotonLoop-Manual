---
title: Optical Setup
date: 02/09/2021
draft: false

weight: 2
---

:icons:
:iconsdir: /icons/
:toc: 

A typical setup for adaptive optics includes a deformable optical element that could be a lens or a mirror connected to a controller, the feedback for the controller is provided by the wavefront sensor. In this configuration the AO system is working in closed loop. If the measurements of the wavefront is not used as a control feedback, the system is working in open loop. In the standard setup we offer a deformable lens or mirror controlled by a controller and a Shack-Hartmann wavefront sensor (SHWFS) for the feedback. Relay optical systems are necessary to conjugate all this element with the exit pupil of a generic optical system. The conjugation is very important for accurate measurements of the wavefront and proper AO operation. The relay system is also useful for beam reduction or expansion to adapt it to the clear aperture of the components.

In the following picture is reported a typical AO setup. Yellow dashed lines represent the conjugated planes.
 
image:/img/image21.png[image,width=612,height=112]

The exit pupil in the figure is the image of the aperture or stop that limits the marginal ray of the generic optical system. The first relay optics conjugates the exit pupil to the deformable lens and the second relay optics conjugate the lens to lenslet array of the Shack-Hartmann wavefront sensor. The far field camera is not necessary for the AO operation but is usually used to monitor the Point Spread Function (PSF) and allow to have a visual feedback of the AO operation. If the optical system uses a point like source and the AO is working properly, you should see a diffraction limited PSF in the far field camera.

The AO system with a deformable mirror instead of the deformable lens is very similar to that one reported before, the DM implies a deflection of the beam with a certain angle so, at least two folding static mirrors are necessary in between the first and the second relay optics.

=== Closed loop AO operation principle

A distorted wavefront comes into the system and is measured with the WFS, the control calculates the correction to feed the deformable element. We obtain a corrected wavefront and in the other side a residual error because new and uncorrelated aberration comes into the system.

=== Non common path aberrations

In some cases, also in static configuration, it is not possible to obtain a perfect diffraction limited PSF in the far field camera due to non-common path aberration. This aberration are generated by the optical elements that are not in common between the sensing arm and the far field camera. The effect of non-common path aberrations is that to a flat wavefront does not correspond a diffraction limited PSF on the far field camera. This problem can be solved using better optical elements a careful alignment or setting some aberrations offset in the wavefront sensor controller as described in section10.

== Physical connections

In a standard configuration you need just to connect the controller PZT Mini/Multi and the cameras to computer using the provided USB/Ethernet cable and connect the deformable element to the controller using the multi wire cable. The controller needs an external power supply.

=== Deformable elements

Deformable elements can be lenses or mirrors. Lenses are composed by thin glass windows with a fluid inside and are actuated by piezoelectric material. Mirror are composed by different reflecting surface depending on the application and piezoelectric actuators. The actuator moves when an electric field is applied. Typical voltage range is in between -62.5V/+125V.

For more detailed in information see the literature list on:

https://dynamic-optics.eu/tech.php

=== Shack-Hartmann Wave Front Sensor

The device is composed by a camera, typically a CMOS, and a lenslet array. The lenslet array is a series of identical micro lenses. The lenslet array sample in space domain the wavefront and produce a series of spots. The position of the spots center of mass is related to the local wavefront gradient. This information is used to reconstruct the wavefront via interpolation with the derivative of Zernike polynomials.

The wavefront sensor is characterized by the focal length and the pitch of the lenslets array. These two parameters influence the sensitivity and dynamical range of the sensor.

For more detailed in information see the literature list on:

https://dynamic-optics.eu/tech.php

== How to build your own AO system

We list the Thorlabs components that can be used to build your own AO system compatible with Dynamic Optic products. We refer to a standard setup as described before in this section with a deformable lens. 

The following image depicts a standard AO setup with a deformable lens.

image:/img/image22.png[]

In the following table you will find all the components:

[%autowidth]
|===
|Component |Code |Manufacturer

|Laser Diode |LDM635/5LJ |Roithner Lasertechnik
|SM1-Threaded Adapter |AD12F |Thorlabs
|Cage Plate Adapter |LCP02/M |Thorlabs
|Lens (collimation) |AC508-200-A-ML |Thorlabs
|Cage Plate |LCP01/M |Thorlabs
|Adaptive lens |AOL1825 |Dynamic Optics
|Lens (focusing) |AC508-200-A-ML |Thorlabs
|Cage Plate 60 mm |LCP01/M |Thorlabs
|Cage Plate Adapter |LCP02/M |Thorlabs
|Lens (collimation) 
a|1" Achromatic Doublet, SM1-Threaded Mount, ARC: 400-700nm. Depending on the MAL:

[%autowidth]
!===
!MAL !Part # !f

!AOL1825 !AC254-040-A-ML !40 mm 
!AOL1816 !AC254 060-A-ML !60 mm 
!AOL1810 !AC254-100-A-ML !100 mm
!AOL1805 !AC254-200-A-ML !200 mm 
!===

|Thorlabs
|Cage Plate 30 mm |CP02/M - SM1 |Thorlabs
|Wavefront sensor |WFS1 |Dynamic Optics
|Cage Plate 30 mm |CP02/M - SM1 |Thorlabs
|Beam splitter |CCM1-BS013/M |Thorlabs
|CMOS camera |DCC1545M |Thorlabs
|Cage Plate 30 mm |CP02/M - SM1 |Thorlabs
|===

== PhotonLoop Setup

As PhotonLoop is installed you are ready to connect the wavefront sensor and the controller PZT mini. These two devices come with their own calibration settings that must be loaded in Photonloop. At this stage, open PhotonLoop and follow the next two paragraphs for camera and controller connection. For these steps you just need to connect the sensor and the controller to the computer with the USB cable. The physical connections are described in details in the next section.

=== Connect to the camera

To connect the camera of the wavefront sensor follow these steps:

. Connect the wavefront sensor with the provided USB cable to your PC. The cable is an USB 3, if you use another cable the frame rate would be reduced according to USB2 bandwidth;
. In PhotonLoop, select the appropriate driver (link:{{< ref "widgets//sensor" >}}[*sensor settings*] widget);
. Load the camera profile contained in the file Snxxxxx.wfs in the USB stick. The serial number of your sensor Snxxxx is written on the camera.
. Click on the camera connection button icon:in_camera[].

Now you can see the live image stream on the link:{{< ref "widgets//viewfinder" >}}[*viewfinder*] widget.

=== Connect to deformable mirror or lens

The connection on the controller is a little bit longer than the procedure for camera connection, just follow these steps:

. Connect the USB cable of the PZT mini to your PC (do not connect to the adaptive lens to the controller with the multi-wire pin cable at this stage because you donÔÇÖt have the voltage control yet);
. The right LED on the PZT Mini switch ON if it is correctly connected;
. Open Zadig (2.2 or newer version, the executable is present in the memory stick);
. On the Options Tab press List All Devices;
image:/img/image16.png[]
. Choose the HV-Driver rev.x device and replace the current driver with WinUSB driver;
. In PhotonLoop, select the appropriate driver (link:{{< ref "widgets//wfc" >}}[*WFC settings*] widget);
. In Channels set the number of actuators of your deformable mirror or lens (this value depends on your device);
. Change the voltage Minimum and Maximum (see table below for values depending on the device).
{{% notice warning %}}
It is important to set the voltage limits to prevent device breakdown. Please note that the PZT Mini is firmware limited according to your deformable mirror/lens limits.
{{% /notice %}}
. Connect the DM or DL to PZT mini using the multi-wire cable. The cable has male connectors and the mirror, lens and controller have female, see picture below respectively for male and female connectors;
[%autowidth]
|===
|image:/img/image18.jpeg[id=small] |image:/img/image19.jpeg[id=small]
|===
. Click on the lens/mirror connection button icon:wfc_device[]. 

Now you can control the actuators voltage from the link:{{< ref "widgets//actuatorsbars" >}}[*actuators bars*] and link:{{< ref "widgets//actuatorstable" >}}[*actuators table*] widgets.

Table below reports a list of standard settings for some deformable lens and mirror with different controller.

[%autowidth]
|===
|Device |Controller |Driver/Plugin |Actuators |Minimum |Center |Maximum

|AOL1810 |Pzt-Mini |UsbHvDriver |18 |-0.5 |0 |1
|AOL1816 |Pzt-Mini |UsbHvDriver |18 |-0.8 |0 |1
|AOL1825 |Pzt-Mini |UsbHvDriver |18 |-0.8 |0 |1
|DM6425 |Pzt-Mini |UsbHvDriver |64 |-0.5 |0 |1
|DM12820 |Pzt-Multi |PZTMulti |128 |-0.5 |0 |1
|DM12820 |Pzt-Multi |Titan |128 |0.25 |0.5 |1
|DM3624 |Pzt-Stack |UsbHvDriver |36 |0 |0.375 |0.75
|DM1010 |Pzt-Stack |UsbHvDriver |10 |0 |0.5 |1
|===

{{% notice warning %}}
Be sure to insert the correct values, verify in your deformable mirror/lens datasheet the limits of your device.
{{% /notice %}}